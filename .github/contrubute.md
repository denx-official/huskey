# Contributing Guide

huskey プロジェクトに興味をお持ちいただき本当にありがとう！  
このプロジェクトに PR を送る場合は、以下の手順を遵守するようお願いいたします。

## 1. まずは Issue から

PR (Pull request) を送る前に、まずはその更新を行ってよいのかを Issue で報告しよう。

Issue を発行するする際、タグに "feat", "release", "hotfix" のどれか１つを必ず付けること（それぞれの意味は次の章で説明）。  
何が問題で、どんな変更を加えたいのか、どんなことを実装する必要があるのかなどを明確に説明しよう。

既に Issue があり、Assignees (その Issue の担当者) が設定されていない場合は、担当したい旨をコメントで報告しよう。

## 2. 開発する

### ブランチの切り方

huskey では、git-flow モデル ([日本語](https://keijinsonyaban.blogspot.com/2010/10/a-successful-git-branching-model.html)
/ [原文](https://nvie.com/posts/a-successful-git-branching-model/)) をベースとしたものを採用しています。

以下は、このプロジェクトにおけるブランチモデルの概要です。

- main
    - 現在アプリケーションとして公開されているブランチ。
    - **このブランチへのマージは Pull Request を通して行われる。**
        - つまり「ローカルリポジトリでこのブランチにマージはするな」ってこと。
- develop
    - 開発途中のソースコード。
    - 開発中に変更された内容は、基本的にこのブランチへマージされる。
    - **このブランチへのマージは Pull Request を通して行われる。**
- feat/#(Issue番号)_(ブランチ名)
    - 新しい機能の実装や、機能を修正する際に用いるブランチ。
    - develop ブランチから派生し、 develop ブランチにマージされる。
- release/#(Issue番号)_(ブランチ名)
    - 新バージョンのアプリを公開する前の最終調整を行うブランチ。
    - develop ブランチから派生し、main/develop ブランチにマージされる。
- hotfix/#(Issue番号)_(ブランチ名)
    - 公開中のアプリケーションに見つかった致命的なバグを修正するためのブランチ。
    - main ブランチから派生し、main/developブランチにマージされる。

ブランチを切る例として、[Issue #2 の「getコマンドの実装」](https://github.com/denx-official/huskey/issues/2) を考えてみよう。  
この Issue には "feat" タグが付いているため、ブランチ名を **"feat/#2_get"** といったようなものにして、develop ブランチから派生させればOK、ということ。

あとは切ったブランチ上で開発を進めよう。こまめに push することも忘れずに！  
Issue が解決するところまで開発が終わったら、PR で報告しよう。

## 3. Pull request を送る

１つの PR につき、Issue は１つまで！  
１つの PR で複数の Issue を報告するのではなく、分割して１つずつ報告しよう。

PR を送る際は、本文の最初に `issue #(Issue番号)` と書き、実装内容のチェックや変更点、（あれば）その他注意点等を簡単に述べること。

コーディング規約は [Coding Style](https://github.com/denx-official/huskey/blob/main/.github/codingstyle.md) を参照。

### Draft pull request について

GitHub には、Draft pull request という機能があります。  
これは開発途中のコードを別の人に見てもらって、フィードバックを貰うことができるという機能です。

例えば、「コードを書いてみたものの、このまま進めていいのだろうか？」とか、「こんな感じにコードを書いてみたけど、こんなんでいいの？」などなど、開発中に疑問に思ったこと気軽に質問ができます。  
何かあれば Draft pull request をガンガン使ってコードを読んでもらおう。

## 4. レビュワーからの報告を受ける

merge されればそこで任務達成です。お疲れさまでした。

場合によってはレビュワーからコードの修正を依頼することがあります。その際はその指示に従ってコードを修正するようにしましょう。

また、（上記の手順を踏んでいれば基本的にないとは思いますが）PR を merge しないという判断を下すこともあります。  
そうなった場合は……ホントごめんなさい。どうかレビュワーを怒らないであげてください。
